

<!DOCTYPE html>

<html lang="en-US">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=Edge">

  <link rel="stylesheet" href="/trustweave/assets/css/just-the-docs-default.css">

  <link rel="stylesheet" href="/trustweave/assets/css/just-the-docs-head-nav.css" id="jtd-head-nav-stylesheet">

  <style id="jtd-nav-activation">
  
    .site-nav ul li a {
      background-image: none;
    }

  </style>

  

  
    <script src="/trustweave/assets/js/vendor/lunr.min.js"></script>
  

  <script src="/trustweave/assets/js/just-the-docs.js"></script>

  <meta name="viewport" content="width=device-width, initial-scale=1">

  



  <!-- Begin Jekyll SEO tag v2.8.0 -->
<title>IoT Device Ownership Transfer Scenario | TrustWeave Developer Documentation</title>
<meta name="generator" content="Jekyll v4.4.1" />
<meta property="og:title" content="IoT Device Ownership Transfer Scenario" />
<meta name="author" content="GeoKnoesis" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Comprehensive developer documentation for TrustWeave - A neutral, reusable trust and identity core library for Kotlin" />
<meta property="og:description" content="Comprehensive developer documentation for TrustWeave - A neutral, reusable trust and identity core library for Kotlin" />
<link rel="canonical" href="http://0.0.0.0:4000/trustweave/scenarios/iot-device-ownership-transfer-scenario/" />
<meta property="og:url" content="http://0.0.0.0:4000/trustweave/scenarios/iot-device-ownership-transfer-scenario/" />
<meta property="og:site_name" content="TrustWeave Developer Documentation" />
<meta property="og:type" content="website" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="IoT Device Ownership Transfer Scenario" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"WebPage","author":{"@type":"Person","name":"GeoKnoesis"},"description":"Comprehensive developer documentation for TrustWeave - A neutral, reusable trust and identity core library for Kotlin","headline":"IoT Device Ownership Transfer Scenario","url":"http://0.0.0.0:4000/trustweave/scenarios/iot-device-ownership-transfer-scenario/"}</script>
<!-- End Jekyll SEO tag -->


  <!-- Main Navigation Styles - Consistent across all pages -->
<style>
  :root {
    --primary: #2563eb;
    --primary-dark: #1e40af;
    --secondary: #7c3aed;
    --accent: #10b981;
    --text: #1f2937;
    --text-light: #6b7280;
    --bg: #ffffff;
    --bg-light: #f9fafb;
    --border: #e5e7eb;
    --gradient: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  }

  .main-nav {
    position: fixed;
    top: 0;
    width: 100%;
    background: rgba(255, 255, 255, 0.95);
    backdrop-filter: blur(10px);
    border-bottom: 1px solid var(--border);
    z-index: 1000;
    padding: 0.5rem 0;
    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
  }

  .main-nav .nav-container {
    max-width: 1200px;
    margin: 0 auto;
    padding: 0 2rem;
    display: flex;
    justify-content: space-between;
    align-items: center;
  }

  .main-nav .logo {
    display: flex;
    align-items: center;
    gap: 0.75rem;
    text-decoration: none;
    transition: opacity 0.3s;
  }

  .main-nav .logo-img {
    height: 120px;
    width: auto;
    transition: opacity 0.3s;
    display: block;
  }

  .main-nav .logo-img:not([src]),
  .main-nav .logo-img[src=""],
  .main-nav .logo-img[src*="undefined"] {
    display: none;
  }


  .main-nav .logo:hover {
    opacity: 0.8;
  }

  .main-nav .logo:hover .logo-img {
    opacity: 0.8;
  }

  .main-nav .nav-links {
    display: flex;
    gap: 1.5rem;
    align-items: center;
  }

  .main-nav .nav-links .nav-link {
    text-decoration: none;
    color: var(--text);
    font-weight: 500;
    font-size: 0.95rem;
    padding: 0.5rem 0;
    transition: color 0.3s;
    position: relative;
    white-space: nowrap;
  }

  .main-nav .nav-links .nav-link:hover {
    color: var(--primary);
  }

  .main-nav .nav-links .nav-link::after {
    content: '';
    position: absolute;
    bottom: 0;
    left: 0;
    width: 0;
    height: 2px;
    background: var(--primary);
    transition: width 0.3s ease;
  }

  .main-nav .nav-links .nav-link:hover::after,
  .main-nav .nav-links .nav-link.active::after {
    width: 100%;
  }

  .main-nav .nav-links .nav-link.active {
    color: var(--primary);
    font-weight: 600;
  }

  /* GitHub icon button */
  .main-nav .nav-links .github-icon {
    display: flex;
    align-items: center;
    justify-content: center;
    width: 48px;
    height: 48px;
    border-radius: 0.5rem;
    transition: all 0.3s;
    padding: 0.5rem;
    color: var(--text);
    text-decoration: none;
    margin-left: 0.5rem;
  }

  .main-nav .nav-links .github-icon:hover {
    background: var(--bg-light);
    transform: translateY(-2px);
    color: var(--primary);
  }

  .main-nav .nav-links .github-icon svg {
    width: 32px;
    height: 32px;
  }

  /* Mobile menu toggle */
  .menu-toggle {
    display: none;
    flex-direction: column;
    cursor: pointer;
    gap: 5px;
    padding: 0.5rem;
    z-index: 1001;
  }

  .menu-toggle span {
    width: 25px;
    height: 3px;
    background: var(--text);
    transition: all 0.3s;
    border-radius: 2px;
  }

  .menu-toggle.active span:nth-child(1) {
    transform: rotate(45deg) translate(8px, 8px);
  }

  .menu-toggle.active span:nth-child(2) {
    opacity: 0;
  }

  .menu-toggle.active span:nth-child(3) {
    transform: rotate(-45deg) translate(7px, -7px);
  }

  /* Footer styles */
  .site-footer {
    background: var(--text);
    color: white;
    padding: 3rem 2rem;
    text-align: center;
    margin-top: 4rem;
  }

  .site-footer .footer-content {
    max-width: 1200px;
    margin: 0 auto;
  }

  .site-footer .footer-links {
    display: flex;
    justify-content: center;
    gap: 2rem;
    margin-bottom: 2rem;
    flex-wrap: wrap;
  }

  .site-footer .footer-links a {
    color: rgba(255, 255, 255, 0.8);
    text-decoration: none;
    transition: color 0.3s;
  }

  .site-footer .footer-links a:hover {
    color: white;
  }

  .site-footer .footer-text {
    color: rgba(255, 255, 255, 0.6);
    font-size: 0.875rem;
  }

  /* Adjust content for fixed nav */
  body {
    padding-top: 160px;
  }

  /* Just the Docs theme adjustments */
  .site-header {
    margin-top: 0 !important;
  }

  /* Mobile responsive */
  @media (max-width: 968px) {
    .menu-toggle {
      display: flex;
    }

    .main-nav .nav-links {
      position: fixed;
      top: 160px;
      left: 0;
      right: 0;
      background: white;
      flex-direction: column;
      padding: 2rem;
      border-bottom: 1px solid var(--border);
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
      transform: translateY(-100%);
      opacity: 0;
      visibility: hidden;
      transition: all 0.3s ease;
      gap: 1.5rem;
      align-items: flex-start;
      max-height: calc(100vh - 160px);
      overflow-y: auto;
    }

    .main-nav .nav-links.active {
      transform: translateY(0);
      opacity: 1;
      visibility: visible;
    }

    .main-nav .nav-links .nav-link {
      width: 100%;
      padding: 0.75rem 0;
      border-bottom: 1px solid var(--border);
    }

    .main-nav .nav-links .nav-link::after {
      display: none;
    }

    .main-nav .nav-links .github-icon {
      width: 100%;
      justify-content: flex-start;
      margin-left: 0;
      padding: 0.75rem 0;
      border-bottom: 1px solid var(--border);
    }

    .main-nav .logo-img {
      height: 120px;
    }

    .site-footer .footer-links {
      flex-direction: column;
      gap: 1rem;
    }
  }

  /* Tablet adjustments */
  @media (max-width: 968px) and (min-width: 769px) {
    .main-nav .nav-links {
      gap: 1rem;
    }

    .main-nav .nav-links .nav-link {
      font-size: 0.9rem;
    }
  }
</style>

<style>
  body { padding-top: 160px !important; }
  .main-nav { z-index: 1000; position: fixed; top: 0; width: 100%; }
  #header-template { display: none; }

  /* Ensure footer spans full width and breaks out of containers */
  .site-footer {
    position: relative !important;
    width: 100vw !important;
    max-width: 100vw !important;
    margin-left: calc(-50vw + 50%) !important;
    margin-right: calc(-50vw + 50%) !important;
    left: 0 !important;
    right: 0 !important;
    clear: both !important;
    z-index: 100 !important;
    box-sizing: border-box !important;
  }
</style>
<!-- Hidden template for header injection -->
<div id="header-template" style="display: none;">
  <!-- Site Header - Consistent across all pages -->
<nav class="main-nav">
    <div class="nav-container">
        <a href="/trustweave/" class="logo">
            <img src="http://0.0.0.0:4000/trustweave/assets/images/trustweave-logo.jpg" alt="TrustWeave Logo" class="logo-img">
        </a>
        <div class="menu-toggle" id="menuToggle" aria-label="Toggle menu">
            <span></span>
            <span></span>
            <span></span>
        </div>
        <div class="nav-links" id="navLinks">
            <a href="/trustweave/" class="nav-link">Home</a>
            <a href="/trustweave/#features" class="nav-link">Features</a>
            <a href="/trustweave/use-scenarios/" class="nav-link">Use Scenarios</a>
            <a href="/trustweave/getting-started/README/" class="nav-link">Docs</a>
            <a href="/trustweave/partnership/" class="nav-link">Partners</a>
            <a href="/trustweave/about/" class="nav-link">About</a>
            <a href="https://github.com/geoknoesis/TrustWeave" target="_blank" rel="noopener noreferrer" class="github-icon" title="View on GitHub" aria-label="GitHub Repository">
                <svg viewBox="0 0 24 24" fill="currentColor" aria-hidden="true">
                    <path d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"/>
                </svg>
            </a>
        </div>
    </div>
</nav>
<script>
    // Mobile menu toggle and active page highlighting
    (function() {
        const menuToggle = document.getElementById('menuToggle');
        const navLinks = document.getElementById('navLinks');

        // Mobile menu toggle
        if (menuToggle && navLinks) {
            menuToggle.addEventListener('click', () => {
                navLinks.classList.toggle('active');
                menuToggle.classList.toggle('active');
            });

            // Close menu when clicking on a link
            document.querySelectorAll('.nav-links a').forEach(link => {
                link.addEventListener('click', () => {
                    navLinks.classList.remove('active');
                    menuToggle.classList.remove('active');
                });
            });

            // Close menu when clicking outside
            document.addEventListener('click', (e) => {
                if (!menuToggle.contains(e.target) && !navLinks.contains(e.target)) {
                    navLinks.classList.remove('active');
                    menuToggle.classList.remove('active');
                }
            });
        }

        // Highlight active page
        const currentPath = window.location.pathname;
        const navLinksList = document.querySelectorAll('.nav-links .nav-link');

        navLinksList.forEach(link => {
            try {
                const linkUrl = new URL(link.href, window.location.origin);
                const linkPath = linkUrl.pathname;
                const baseUrl = '/trustweave' || '';

                // Normalize paths
                let cleanCurrentPath = currentPath.replace(baseUrl, '').replace(/\/$/, '') || '/';
                let cleanLinkPath = linkPath.replace(baseUrl, '').replace(/\/$/, '') || '/';

                // Handle index pages
                if (cleanCurrentPath === '' || cleanCurrentPath === '/index.html') cleanCurrentPath = '/';
                if (cleanLinkPath === '' || cleanLinkPath === '/index.html') cleanLinkPath = '/';

                // Check if current path matches link path
                if (cleanCurrentPath === cleanLinkPath) {
                    link.classList.add('active');
                } else if (cleanLinkPath !== '/' && cleanCurrentPath.startsWith(cleanLinkPath + '/')) {
                    // Handle sub-pages (e.g., /introduction/ matches /introduction/README/)
                    link.classList.add('active');
                }
            } catch (e) {
                // Fallback for relative URLs or errors
                const href = link.getAttribute('href');
                if (href && (currentPath.includes(href) || (href === '/' && currentPath.endsWith('index.html')))) {
                    link.classList.add('active');
                }
            }
        });
    })();
</script>


</div>
<script>
  // Move header from template to body top
  document.addEventListener('DOMContentLoaded', function() {
    const template = document.getElementById('header-template');
    if (template) {
      const header = template.querySelector('.main-nav');
      if (header) {
        document.body.insertBefore(header, document.body.firstChild);
        template.remove();
      }
    }
  });
</script>


</head>

<body>
  <a class="skip-to-main" href="#main-content">Skip to main content</a>
  <svg xmlns="http://www.w3.org/2000/svg" class="d-none">
  <symbol id="svg-link" viewBox="0 0 24 24">
  <title>Link</title>
  <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-link">
    <path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path>
  </svg>
</symbol>

  <symbol id="svg-menu" viewBox="0 0 24 24">
  <title>Menu</title>
  <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-menu">
    <line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line>
  </svg>
</symbol>

  <symbol id="svg-arrow-right" viewBox="0 0 24 24">
  <title>Expand</title>
  <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-right">
    <polyline points="9 18 15 12 9 6"></polyline>
  </svg>
</symbol>

  <!-- Feather. MIT License: https://github.com/feathericons/feather/blob/master/LICENSE -->
<symbol id="svg-external-link" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-external-link">
  <title id="svg-external-link-title">(external link)</title>
  <path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path><polyline points="15 3 21 3 21 9"></polyline><line x1="10" y1="14" x2="21" y2="3"></line>
</symbol>

  
    <symbol id="svg-doc" viewBox="0 0 24 24">
  <title>Document</title>
  <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-file">
    <path d="M13 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V9z"></path><polyline points="13 2 13 9 20 9"></polyline>
  </svg>
</symbol>

    <symbol id="svg-search" viewBox="0 0 24 24">
  <title>Search</title>
  <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-search">
    <circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line>
  </svg>
</symbol>

  
  
    <!-- Bootstrap Icons. MIT License: https://github.com/twbs/icons/blob/main/LICENSE.md -->
<symbol id="svg-copy" viewBox="0 0 16 16">
  <title>Copy</title>
  <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-clipboard" viewBox="0 0 16 16">
    <path d="M4 1.5H3a2 2 0 0 0-2 2V14a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V3.5a2 2 0 0 0-2-2h-1v1h1a1 1 0 0 1 1 1V14a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1V3.5a1 1 0 0 1 1-1h1v-1z"/>
    <path d="M9.5 1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-1a.5.5 0 0 1 .5-.5h3zm-3-1A1.5 1.5 0 0 0 5 1.5v1A1.5 1.5 0 0 0 6.5 4h3A1.5 1.5 0 0 0 11 2.5v-1A1.5 1.5 0 0 0 9.5 0h-3z"/>
  </svg>
</symbol>
<symbol id="svg-copied" viewBox="0 0 16 16">
  <title>Copied</title>
  <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-clipboard-check-fill" viewBox="0 0 16 16">
    <path d="M6.5 0A1.5 1.5 0 0 0 5 1.5v1A1.5 1.5 0 0 0 6.5 4h3A1.5 1.5 0 0 0 11 2.5v-1A1.5 1.5 0 0 0 9.5 0h-3Zm3 1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-1a.5.5 0 0 1 .5-.5h3Z"/>
    <path d="M4 1.5H3a2 2 0 0 0-2 2V14a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V3.5a2 2 0 0 0-2-2h-1v1A2.5 2.5 0 0 1 9.5 5h-3A2.5 2.5 0 0 1 4 2.5v-1Zm6.854 7.354-3 3a.5.5 0 0 1-.708 0l-1.5-1.5a.5.5 0 0 1 .708-.708L7.5 10.793l2.646-2.647a.5.5 0 0 1 .708.708Z"/>
  </svg>
</symbol>

  
</svg>

  
    <div class="side-bar">
  <div class="site-header" role="banner">
    <a href="/trustweave/" class="site-title lh-tight">
  TrustWeave Developer Documentation

</a>
    <button id="menu-button" class="site-button btn-reset" aria-label="Toggle menu" aria-pressed="false">
      <svg viewBox="0 0 24 24" class="icon" aria-hidden="true"><use xlink:href="#svg-menu"></use></svg>
    </button>
  </div>

  <nav aria-label="Main" id="site-nav" class="site-nav">
  
  
    <ul class="nav-list"><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in Introduction category" aria-pressed="false">
        <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg>
      </button><a href="/trustweave/introduction/README/" class="nav-list-link">Introduction</a><ul class="nav-list"><li class="nav-list-item"><a href="/trustweave/introduction/what-is-trustweave/" class="nav-list-link">What is TrustWeave?</a></li><li class="nav-list-item"><a href="/trustweave/introduction/executive-overview/" class="nav-list-link">Executive Overview: TrustWeave</a></li><li class="nav-list-item"><a href="/trustweave/introduction/key-features/" class="nav-list-link">Key Features</a></li><li class="nav-list-item"><a href="/trustweave/introduction/use-cases/" class="nav-list-link">Use Cases</a></li><li class="nav-list-item"><a href="/trustweave/introduction/architecture-overview/" class="nav-list-link">Architecture Overview</a></li><li class="nav-list-item"><a href="/trustweave/introduction/mental-model/" class="nav-list-link">TrustWeave Mental Model</a></li><li class="nav-list-item"><a href="/trustweave/introduction/web-of-trust/" class="nav-list-link">The Web of Trust: Foundation for Decentralized Trust</a></li></ul></li><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in Getting Started category" aria-pressed="false">
        <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg>
      </button><a href="/trustweave/getting-started/README/" class="nav-list-link">Getting Started</a><ul class="nav-list"><li class="nav-list-item"><a href="/trustweave/getting-started/installation/" class="nav-list-link">Installation</a></li><li class="nav-list-item"><a href="/trustweave/getting-started/quick-start/" class="nav-list-link">Quick Start</a></li><li class="nav-list-item"><a href="/trustweave/getting-started/your-first-application/" class="nav-list-link">Your First Application</a></li><li class="nav-list-item"><a href="/trustweave/getting-started/project-setup/" class="nav-list-link">Project Setup</a></li><li class="nav-list-item"><a href="/trustweave/getting-started/ide-setup/" class="nav-list-link">IDE Setup Guide</a></li><li class="nav-list-item"><a href="/trustweave/getting-started/common-patterns/" class="nav-list-link">Common Patterns</a></li><li class="nav-list-item"><a href="/trustweave/getting-started/api-patterns/" class="nav-list-link">API Patterns and Best Practices</a></li><li class="nav-list-item"><a href="/trustweave/getting-started/workflows/" class="nav-list-link">Common Workflows</a></li><li class="nav-list-item"><a href="/trustweave/getting-started/dsl-guide/" class="nav-list-link">TrustWeave DSL Guide</a></li><li class="nav-list-item"><a href="/trustweave/getting-started/troubleshooting/" class="nav-list-link">Troubleshooting Guide</a></li><li class="nav-list-item"><a href="/trustweave/getting-started/production-deployment/" class="nav-list-link">Production Deployment Guide</a></li></ul></li><li class="nav-list-item"><a href="/trustweave/tutorials/README/" class="nav-list-link">Tutorials</a></li><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in How-To Guides category" aria-pressed="false">
        <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg>
      </button><a href="/trustweave/how-to/README/" class="nav-list-link">How-To Guides</a><ul class="nav-list"><li class="nav-list-item"><a href="/trustweave/how-to/use-trustweave-facade/" class="nav-list-link">Use TrustWeave Facade for Quick Setup</a></li><li class="nav-list-item"><a href="/trustweave/how-to/configure-trustlayer/" class="nav-list-link">Configure TrustWeave</a></li><li class="nav-list-item"><a href="/trustweave/how-to/create-dids/" class="nav-list-link">Create and Manage DIDs</a></li><li class="nav-list-item"><a href="/trustweave/how-to/issue-credentials/" class="nav-list-link">Issue Credentials</a></li><li class="nav-list-item"><a href="/trustweave/how-to/verify-credentials/" class="nav-list-link">Verify Credentials</a></li><li class="nav-list-item"><a href="/trustweave/how-to/manage-wallets/" class="nav-list-link">Manage Wallets</a></li><li class="nav-list-item"><a href="/trustweave/how-to/blockchain-anchoring/" class="nav-list-link">Anchor to Blockchain</a></li><li class="nav-list-item"><a href="/trustweave/how-to/multi-chain-anchoring/" class="nav-list-link">Multi-Chain Anchoring Patterns</a></li><li class="nav-list-item"><a href="/trustweave/how-to/exchange-credentials/" class="nav-list-link">Exchange Credentials with Multiple Protocols</a></li></ul></li><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in Core Concepts category" aria-pressed="false">
        <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg>
      </button><a href="/trustweave/core-concepts/README/" class="nav-list-link">Core Concepts</a><ul class="nav-list"><li class="nav-list-item"><a href="/trustweave/core-concepts/dids/" class="nav-list-link">Decentralized Identifiers (DIDs)</a></li><li class="nav-list-item"><a href="/trustweave/core-concepts/verifiable-credentials/" class="nav-list-link">Verifiable Credentials (VCs)</a></li><li class="nav-list-item"><a href="/trustweave/core-concepts/wallets/" class="nav-list-link">Wallets</a></li><li class="nav-list-item"><a href="/trustweave/core-concepts/blockchain-anchoring/" class="nav-list-link">Blockchain Anchoring</a></li><li class="nav-list-item"><a href="/trustweave/core-concepts/smart-contracts/" class="nav-list-link">Smart Contracts</a></li><li class="nav-list-item"><a href="/trustweave/core-concepts/key-management/" class="nav-list-link">Key Management</a></li></ul></li><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in API Reference category" aria-pressed="false">
        <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg>
      </button><a href="/trustweave/api-reference/README/" class="nav-list-link">API Reference</a><ul class="nav-list"><li class="nav-list-item"><a href="/trustweave/api-reference/quick-reference/" class="nav-list-link">Quick Reference</a></li><li class="nav-list-item"><a href="/trustweave/api-reference/error-types/" class="nav-list-link">Error Types</a></li><li class="nav-list-item"><a href="/trustweave/api-reference/data-types/" class="nav-list-link">Data Types</a></li><li class="nav-list-item"><a href="/trustweave/api-reference/core-api/" class="nav-list-link">Core API Reference</a></li><li class="nav-list-item"><a href="/trustweave/api-reference/wallet-api/" class="nav-list-link">Wallet API Reference</a></li><li class="nav-list-item"><a href="/trustweave/api-reference/credential-service-api/" class="nav-list-link">Credential Service API Reference</a></li><li class="nav-list-item"><a href="/trustweave/api-reference/smart-contract-api/" class="nav-list-link">Smart Contract API Reference</a></li></ul></li><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in Reference category" aria-pressed="false">
        <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg>
      </button><a href="/trustweave/reference/README/" class="nav-list-link">Reference</a><ul class="nav-list"><li class="nav-list-item"><a href="/trustweave/modules/core-modules/" class="nav-list-link">Core Modules</a></li><li class="nav-list-item"><a href="/trustweave/faq/" class="nav-list-link">Frequently Asked Questions</a></li></ul></li><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in Advanced Topics category" aria-pressed="false">
        <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg>
      </button><a href="/trustweave/advanced/README/" class="nav-list-link">Advanced Topics</a><ul class="nav-list"><li class="nav-list-item"><a href="/trustweave/advanced/error-handling/" class="nav-list-link">Error Handling</a></li></ul></li><li class="nav-list-item"><a href="/trustweave/integrations/README/" class="nav-list-link">Integration Modules</a></li><li class="nav-list-item"><a href="/trustweave/contributing/README/" class="nav-list-link">Contributing to TrustWeave</a></li></ul>
  
</nav>




  
  
    <footer class="site-footer">
      This site uses <a href="https://github.com/just-the-docs/just-the-docs">Just the Docs</a>, a documentation theme for Jekyll.
    </footer>
  
</div>

  
  <div class="main" id="top">
    <div id="main-header" class="main-header">
  
    

<div class="search" role="search">
  <div class="search-input-wrap">
    <input type="text" id="search-input" class="search-input" tabindex="0" placeholder="Search TrustWeave Developer Documentation" aria-label="Search TrustWeave Developer Documentation" autocomplete="off">
    <label for="search-input" class="search-label"><svg viewBox="0 0 24 24" class="search-icon"><use xlink:href="#svg-search"></use></svg></label>
  </div>
  <div id="search-results" class="search-results"></div>
</div>

  
  
  
</div>

    <div class="main-content-wrap">
      
      <div id="main-content" class="main-content">
        <main>
          
            <h1 id="iot-device-ownership-transfer-scenario">
  
  
    <a href="#iot-device-ownership-transfer-scenario" class="anchor-heading" aria-labelledby="iot-device-ownership-transfer-scenario"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> IoT Device Ownership Transfer Scenario
  
  
</h1>
    

<p>This guide demonstrates how to build an IoT device ownership transfer system using TrustWeave. You’ll learn how device owners can transfer ownership securely, how new owners can verify transfer authorization, and how previous owners can be revoked while maintaining a complete audit trail.</p>
<h2 id="what-youll-build">
  
  
    <a href="#what-youll-build" class="anchor-heading" aria-labelledby="what-youll-build"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> What You’ll Build
  
  
</h2>
    

<p>By the end of this tutorial, you’ll have:</p>

<ul>
  <li>✅ Created DIDs for device manufacturers, current owners, and new owners</li>
  <li>✅ Issued device ownership credentials</li>
  <li>✅ Created ownership transfer credentials</li>
  <li>✅ Implemented transfer authorization verification</li>
  <li>✅ Demonstrated previous owner revocation</li>
  <li>✅ Created transfer history tracking</li>
  <li>✅ Implemented new owner authorization</li>
  <li>✅ Demonstrated secure ownership handoff</li>
</ul>
<h2 id="big-picture--significance">
  
  
    <a href="#big-picture--significance" class="anchor-heading" aria-labelledby="big-picture--significance"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Big Picture &amp; Significance
  
  
</h2>
    
<h3 id="the-iot-device-ownership-challenge">
  
  
    <a href="#the-iot-device-ownership-challenge" class="anchor-heading" aria-labelledby="the-iot-device-ownership-challenge"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> The IoT Device Ownership Challenge
  
  
</h3>
    

<p>IoT devices change ownership when sold, transferred, or change hands. However, traditional ownership transfer is insecure, lacks verification, and doesn’t properly revoke previous owner access. Verifiable credentials enable secure, verifiable ownership transfer with complete audit trails.</p>

<p><strong>Industry Context:</strong></p>
<ul>
  <li><strong>Device Resale</strong>: Billions of IoT devices resold annually</li>
  <li><strong>Security Risk</strong>: Previous owners may retain access</li>
  <li><strong>Trust Issues</strong>: Can’t verify device ownership history</li>
  <li><strong>Compliance</strong>: Regulations require ownership tracking</li>
  <li><strong>Market Growth</strong>: Growing IoT device resale market</li>
</ul>

<p><strong>Why This Matters:</strong></p>
<ol>
  <li><strong>Security</strong>: Prevent unauthorized access from previous owners</li>
  <li><strong>Trust</strong>: Verify device ownership history</li>
  <li><strong>Compliance</strong>: Meet regulatory requirements for ownership tracking</li>
  <li><strong>Audit Trail</strong>: Complete ownership transfer history</li>
  <li><strong>Revocation</strong>: Properly revoke previous owner access</li>
  <li><strong>Verification</strong>: Verify transfer authorization</li>
</ol>
<h3 id="the-iot-device-ownership-problem">
  
  
    <a href="#the-iot-device-ownership-problem" class="anchor-heading" aria-labelledby="the-iot-device-ownership-problem"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> The IoT Device Ownership Problem
  
  
</h3>
    

<p>Traditional ownership transfer faces critical issues:</p>
<ul>
  <li><strong>No Verification</strong>: Can’t verify ownership transfer</li>
  <li><strong>Access Retention</strong>: Previous owners may retain access</li>
  <li><strong>No Audit Trail</strong>: No record of ownership transfers</li>
  <li><strong>Trust Issues</strong>: Can’t verify device ownership history</li>
  <li><strong>Security Risk</strong>: Unauthorized access from previous owners</li>
  <li><strong>Compliance Risk</strong>: Difficult to meet regulatory requirements</li>
</ul>
<h2 id="value-proposition">
  
  
    <a href="#value-proposition" class="anchor-heading" aria-labelledby="value-proposition"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Value Proposition
  
  
</h2>
    
<h3 id="problems-solved">
  
  
    <a href="#problems-solved" class="anchor-heading" aria-labelledby="problems-solved"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Problems Solved
  
  
</h3>
    

<ol>
  <li><strong>Secure Transfer</strong>: Cryptographic proof of ownership transfer</li>
  <li><strong>Access Revocation</strong>: Properly revoke previous owner access</li>
  <li><strong>Ownership Verification</strong>: Verify current device owner</li>
  <li><strong>Audit Trail</strong>: Complete ownership transfer history</li>
  <li><strong>Compliance</strong>: Automated compliance with ownership tracking requirements</li>
  <li><strong>Trust</strong>: Cryptographic proof of ownership</li>
  <li><strong>Authorization</strong>: Verify transfer authorization</li>
</ol>
<h3 id="business-benefits">
  
  
    <a href="#business-benefits" class="anchor-heading" aria-labelledby="business-benefits"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Business Benefits
  
  
</h3>
    

<p><strong>For Device Owners:</strong></p>
<ul>
  <li><strong>Security</strong>: Secure ownership transfer</li>
  <li><strong>Trust</strong>: Verify device ownership history</li>
  <li><strong>Compliance</strong>: Meet regulatory requirements</li>
  <li><strong>Control</strong>: Control who has access to device</li>
  <li><strong>Efficiency</strong>: Streamlined transfer process</li>
</ul>

<p><strong>For Device Manufacturers:</strong></p>
<ul>
  <li><strong>Security</strong>: Prevent unauthorized device access</li>
  <li><strong>Compliance</strong>: Meet regulatory requirements</li>
  <li><strong>Trust</strong>: Enhanced trust through verifiable credentials</li>
  <li><strong>Efficiency</strong>: Automated credential issuance</li>
</ul>

<p><strong>For Marketplaces:</strong></p>
<ul>
  <li><strong>Trust</strong>: Verify device ownership before sale</li>
  <li><strong>Security</strong>: Prevent fraud in device resale</li>
  <li><strong>Compliance</strong>: Meet marketplace regulations</li>
  <li><strong>Efficiency</strong>: Streamlined verification process</li>
</ul>
<h3 id="roi-considerations">
  
  
    <a href="#roi-considerations" class="anchor-heading" aria-labelledby="roi-considerations"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> ROI Considerations
  
  
</h3>
    

<ul>
  <li><strong>Security</strong>: Prevents unauthorized device access</li>
  <li><strong>Compliance</strong>: Automated regulatory compliance</li>
  <li><strong>Trust</strong>: Enhanced trust in device resale</li>
  <li><strong>Risk Reduction</strong>: 90% reduction in ownership-related security risks</li>
  <li><strong>Cost Savings</strong>: Prevents costly security breaches</li>
</ul>
<h2 id="understanding-the-problem">
  
  
    <a href="#understanding-the-problem" class="anchor-heading" aria-labelledby="understanding-the-problem"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Understanding the Problem
  
  
</h2>
    

<p>Traditional ownership transfer has several problems:</p>

<ol>
  <li><strong>No verification</strong>: Can’t verify ownership transfer</li>
  <li><strong>Access retention</strong>: Previous owners may retain access</li>
  <li><strong>No audit trail</strong>: No record of ownership transfers</li>
  <li><strong>Trust issues</strong>: Can’t verify device ownership history</li>
  <li><strong>Security risk</strong>: Unauthorized access from previous owners</li>
</ol>

<p>TrustWeave solves this by enabling:</p>

<ul>
  <li><strong>Secure transfer</strong>: Cryptographic proof of ownership transfer</li>
  <li><strong>Access revocation</strong>: Properly revoke previous owner access</li>
  <li><strong>Ownership verification</strong>: Verify current device owner</li>
  <li><strong>Audit trail</strong>: Complete ownership transfer history</li>
  <li><strong>Compliance</strong>: Automated compliance with regulations</li>
</ul>
<h2 id="how-it-works-the-device-ownership-transfer-flow">
  
  
    <a href="#how-it-works-the-device-ownership-transfer-flow" class="anchor-heading" aria-labelledby="how-it-works-the-device-ownership-transfer-flow"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> How It Works: The Device Ownership Transfer Flow
  
  
</h2>
    

<pre><code class="language-mermaid">flowchart TD
    A["Current Owner&lt;br/&gt;Initiates Transfer&lt;br/&gt;Creates Transfer Request"] --&gt;|creates| B["Ownership Transfer Credential&lt;br/&gt;Current Owner DID&lt;br/&gt;New Owner DID&lt;br/&gt;Device DID&lt;br/&gt;Transfer Authorization&lt;br/&gt;Cryptographic Proof"]
    B --&gt;|verifies| C["Device Manufacturer&lt;br/&gt;Verifies Transfer&lt;br/&gt;Issues New Ownership Credential"]
    C --&gt;|issues| D["New Ownership Credential&lt;br/&gt;New Owner DID&lt;br/&gt;Device DID&lt;br/&gt;Ownership Date&lt;br/&gt;Cryptographic Proof"]
    D --&gt;|revokes| E["Previous Owner&lt;br/&gt;Access Revoked&lt;br/&gt;Ownership Credential Revoked"]

    style A fill:#1976d2,stroke:#0d47a1,stroke-width:2px,color:#fff
    style B fill:#f57c00,stroke:#e65100,stroke-width:2px,color:#fff
    style C fill:#388e3c,stroke:#1b5e20,stroke-width:2px,color:#fff
    style D fill:#9c27b0,stroke:#4a148c,stroke-width:2px,color:#fff
    style E fill:#c2185b,stroke:#880e4f,stroke-width:2px,color:#fff
</code></pre>
<h2 id="prerequisites">
  
  
    <a href="#prerequisites" class="anchor-heading" aria-labelledby="prerequisites"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Prerequisites
  
  
</h2>
    

<ul>
  <li>Java 21+</li>
  <li>Kotlin 2.2.0+</li>
  <li>Gradle 8.5+</li>
  <li>Basic understanding of Kotlin and coroutines</li>
  <li>Understanding of device ownership and transfer processes</li>
</ul>
<h2 id="step-1-add-dependencies">
  
  
    <a href="#step-1-add-dependencies" class="anchor-heading" aria-labelledby="step-1-add-dependencies"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Step 1: Add Dependencies
  
  
</h2>
    

<p>Add TrustWeave dependencies to your <code class="language-plaintext highlighter-rouge">build.gradle.kts</code>:</p>

<div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight"><code><div class="table-wrapper"><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
</pre></td><td class="rouge-code"><pre><span class="nf">dependencies</span> <span class="p">{</span>
    <span class="c1">// Core TrustWeave modules</span>
    <span class="nf">implementation</span><span class="p">(</span><span class="s">"com.trustweave:trustweave-all:1.0.0-SNAPSHOT"</span><span class="p">)</span>

    <span class="c1">// Kotlinx Serialization</span>
    <span class="nf">implementation</span><span class="p">(</span><span class="s">"org.jetbrains.kotlinx:kotlinx-serialization-json:1.6.0"</span><span class="p">)</span>

    <span class="c1">// Coroutines</span>
    <span class="nf">implementation</span><span class="p">(</span><span class="s">"org.jetbrains.kotlinx:kotlinx-coroutines-core:1.7.3"</span><span class="p">)</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></div></code></pre></div></div>
<h2 id="step-2-complete-runnable-example">
  
  
    <a href="#step-2-complete-runnable-example" class="anchor-heading" aria-labelledby="step-2-complete-runnable-example"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Step 2: Complete Runnable Example
  
  
</h2>
    

<p>Here’s the full IoT device ownership transfer flow using the TrustWeave facade API:</p>

<div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight"><code><div class="table-wrapper"><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97
98
99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135
136
137
138
139
140
141
142
143
144
145
146
147
148
149
150
151
152
153
154
155
156
157
158
159
160
161
162
163
164
165
166
167
168
169
170
171
172
173
174
175
176
177
178
179
180
181
182
183
184
185
186
187
188
189
190
191
192
193
194
195
196
197
198
199
200
201
202
203
204
205
206
207
208
209
210
211
212
213
214
215
216
217
218
219
220
221
222
223
224
225
226
227
228
229
230
231
232
233
234
235
236
237
238
239
240
241
242
243
244
245
246
247
248
249
250
251
252
253
254
255
256
257
258
259
260
261
262
263
264
265
266
267
268
269
270
271
272
273
274
275
276
277
278
279
280
281
282
283
284
285
286
287
288
289
290
291
292
293
294
295
296
297
298
299
300
301
302
303
304
305
306
307
308
309
310
311
312
313
314
315
316
317
318
319
320
321
322
323
324
325
326
327
328
329
</pre></td><td class="rouge-code"><pre><span class="k">package</span> <span class="nn">com.example.iot.ownership.transfer</span>

<span class="k">import</span> <span class="nn">com.trustweave.TrustWeave</span>
<span class="k">import</span> <span class="nn">com.trustweave.core.*</span>
<span class="k">import</span> <span class="nn">com.trustweave.credential.PresentationOptions</span>
<span class="k">import</span> <span class="nn">com.trustweave.credential.wallet.Wallet</span>
<span class="k">import</span> <span class="nn">com.trustweave.spi.services.WalletCreationOptionsBuilder</span>
<span class="k">import</span> <span class="nn">kotlinx.coroutines.runBlocking</span>
<span class="k">import</span> <span class="nn">kotlinx.serialization.json.buildJsonObject</span>
<span class="k">import</span> <span class="nn">kotlinx.serialization.json.put</span>
<span class="k">import</span> <span class="nn">java.time.Instant</span>
<span class="k">import</span> <span class="nn">java.time.temporal.ChronoUnit</span>

<span class="k">fun</span> <span class="nf">main</span><span class="p">()</span> <span class="p">=</span> <span class="nf">runBlocking</span> <span class="p">{</span>
    <span class="nf">println</span><span class="p">(</span><span class="s">"="</span><span class="p">.</span><span class="nf">repeat</span><span class="p">(</span><span class="mi">70</span><span class="p">))</span>
    <span class="nf">println</span><span class="p">(</span><span class="s">"IoT Device Ownership Transfer Scenario - Complete End-to-End Example"</span><span class="p">)</span>
    <span class="nf">println</span><span class="p">(</span><span class="s">"="</span><span class="p">.</span><span class="nf">repeat</span><span class="p">(</span><span class="mi">70</span><span class="p">))</span>

    <span class="c1">// Step 1: Create TrustWeave instance</span>
    <span class="kd">val</span> <span class="py">TrustWeave</span> <span class="p">=</span> <span class="nc">TrustWeave</span><span class="p">.</span><span class="nf">create</span><span class="p">()</span>
    <span class="nf">println</span><span class="p">(</span><span class="s">"\n✅ TrustWeave initialized"</span><span class="p">)</span>

    <span class="c1">// Step 2: Create DIDs for manufacturer, current owner, and new owner</span>
    <span class="k">import</span> <span class="nn">com.trustweave.trust.types.DidCreationResult</span>
    <span class="k">import</span> <span class="nn">com.trustweave.trust.types.WalletCreationResult</span>
    
    <span class="kd">val</span> <span class="py">manufacturerDidResult</span> <span class="p">=</span> <span class="n">trustWeave</span><span class="p">.</span><span class="nf">createDid</span> <span class="p">{</span> <span class="nf">method</span><span class="p">(</span><span class="s">"key"</span><span class="p">)</span> <span class="p">}</span>
    <span class="kd">val</span> <span class="py">manufacturerDid</span> <span class="p">=</span> <span class="k">when</span> <span class="p">(</span><span class="n">manufacturerDidResult</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">is</span> <span class="nc">DidCreationResult</span><span class="p">.</span><span class="nc">Success</span> <span class="p">-&gt;</span> <span class="n">manufacturerDidResult</span><span class="p">.</span><span class="n">did</span>
        <span class="k">else</span> <span class="p">-&gt;</span> <span class="k">throw</span> <span class="nc">IllegalStateException</span><span class="p">(</span><span class="s">"Failed to create manufacturer DID: ${manufacturerDidResult.reason}"</span><span class="p">)</span>
    <span class="p">}</span>
    
    <span class="kd">val</span> <span class="py">manufacturerResolution</span> <span class="p">=</span> <span class="n">trustWeave</span><span class="p">.</span><span class="nf">resolveDid</span><span class="p">(</span><span class="n">manufacturerDid</span><span class="p">)</span>
    <span class="kd">val</span> <span class="py">manufacturerDoc</span> <span class="p">=</span> <span class="k">when</span> <span class="p">(</span><span class="n">manufacturerResolution</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">is</span> <span class="nc">DidResolutionResult</span><span class="p">.</span><span class="nc">Success</span> <span class="p">-&gt;</span> <span class="n">manufacturerResolution</span><span class="p">.</span><span class="n">document</span>
        <span class="k">else</span> <span class="p">-&gt;</span> <span class="k">throw</span> <span class="nc">IllegalStateException</span><span class="p">(</span><span class="s">"Failed to resolve manufacturer DID"</span><span class="p">)</span>
    <span class="p">}</span>
    <span class="kd">val</span> <span class="py">manufacturerKeyId</span> <span class="p">=</span> <span class="n">manufacturerDoc</span><span class="p">.</span><span class="n">verificationMethod</span><span class="p">.</span><span class="nf">firstOrNull</span><span class="p">()</span><span class="o">?.</span><span class="n">id</span><span class="o">?.</span><span class="nf">substringAfter</span><span class="p">(</span><span class="s">"#"</span><span class="p">)</span>
        <span class="o">?:</span> <span class="k">throw</span> <span class="nc">IllegalStateException</span><span class="p">(</span><span class="s">"No verification method found"</span><span class="p">)</span>

    <span class="kd">val</span> <span class="py">currentOwnerDidResult</span> <span class="p">=</span> <span class="n">trustWeave</span><span class="p">.</span><span class="nf">createDid</span> <span class="p">{</span> <span class="nf">method</span><span class="p">(</span><span class="s">"key"</span><span class="p">)</span> <span class="p">}</span>
    <span class="kd">val</span> <span class="py">currentOwnerDid</span> <span class="p">=</span> <span class="k">when</span> <span class="p">(</span><span class="n">currentOwnerDidResult</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">is</span> <span class="nc">DidCreationResult</span><span class="p">.</span><span class="nc">Success</span> <span class="p">-&gt;</span> <span class="n">currentOwnerDidResult</span><span class="p">.</span><span class="n">did</span>
        <span class="k">else</span> <span class="p">-&gt;</span> <span class="k">throw</span> <span class="nc">IllegalStateException</span><span class="p">(</span><span class="s">"Failed to create current owner DID: ${currentOwnerDidResult.reason}"</span><span class="p">)</span>
    <span class="p">}</span>
    
    <span class="kd">val</span> <span class="py">currentOwnerResolution</span> <span class="p">=</span> <span class="n">trustWeave</span><span class="p">.</span><span class="nf">resolveDid</span><span class="p">(</span><span class="n">currentOwnerDid</span><span class="p">)</span>
    <span class="kd">val</span> <span class="py">currentOwnerDoc</span> <span class="p">=</span> <span class="k">when</span> <span class="p">(</span><span class="n">currentOwnerResolution</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">is</span> <span class="nc">DidResolutionResult</span><span class="p">.</span><span class="nc">Success</span> <span class="p">-&gt;</span> <span class="n">currentOwnerResolution</span><span class="p">.</span><span class="n">document</span>
        <span class="k">else</span> <span class="p">-&gt;</span> <span class="k">throw</span> <span class="nc">IllegalStateException</span><span class="p">(</span><span class="s">"Failed to resolve current owner DID"</span><span class="p">)</span>
    <span class="p">}</span>
    <span class="kd">val</span> <span class="py">currentOwnerKeyId</span> <span class="p">=</span> <span class="n">currentOwnerDoc</span><span class="p">.</span><span class="n">verificationMethod</span><span class="p">.</span><span class="nf">firstOrNull</span><span class="p">()</span><span class="o">?.</span><span class="n">id</span><span class="o">?.</span><span class="nf">substringAfter</span><span class="p">(</span><span class="s">"#"</span><span class="p">)</span>
        <span class="o">?:</span> <span class="k">throw</span> <span class="nc">IllegalStateException</span><span class="p">(</span><span class="s">"No verification method found"</span><span class="p">)</span>

    <span class="kd">val</span> <span class="py">newOwnerDidResult</span> <span class="p">=</span> <span class="n">trustWeave</span><span class="p">.</span><span class="nf">createDid</span> <span class="p">{</span> <span class="nf">method</span><span class="p">(</span><span class="s">"key"</span><span class="p">)</span> <span class="p">}</span>
    <span class="kd">val</span> <span class="py">newOwnerDid</span> <span class="p">=</span> <span class="k">when</span> <span class="p">(</span><span class="n">newOwnerDidResult</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">is</span> <span class="nc">DidCreationResult</span><span class="p">.</span><span class="nc">Success</span> <span class="p">-&gt;</span> <span class="n">newOwnerDidResult</span><span class="p">.</span><span class="n">did</span>
        <span class="k">else</span> <span class="p">-&gt;</span> <span class="k">throw</span> <span class="nc">IllegalStateException</span><span class="p">(</span><span class="s">"Failed to create new owner DID: ${newOwnerDidResult.reason}"</span><span class="p">)</span>
    <span class="p">}</span>
    
    <span class="kd">val</span> <span class="py">newOwnerResolution</span> <span class="p">=</span> <span class="n">trustWeave</span><span class="p">.</span><span class="nf">resolveDid</span><span class="p">(</span><span class="n">newOwnerDid</span><span class="p">)</span>
    <span class="kd">val</span> <span class="py">newOwnerDoc</span> <span class="p">=</span> <span class="k">when</span> <span class="p">(</span><span class="n">newOwnerResolution</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">is</span> <span class="nc">DidResolutionResult</span><span class="p">.</span><span class="nc">Success</span> <span class="p">-&gt;</span> <span class="n">newOwnerResolution</span><span class="p">.</span><span class="n">document</span>
        <span class="k">else</span> <span class="p">-&gt;</span> <span class="k">throw</span> <span class="nc">IllegalStateException</span><span class="p">(</span><span class="s">"Failed to resolve new owner DID"</span><span class="p">)</span>
    <span class="p">}</span>
    <span class="kd">val</span> <span class="py">newOwnerKeyId</span> <span class="p">=</span> <span class="n">newOwnerDoc</span><span class="p">.</span><span class="n">verificationMethod</span><span class="p">.</span><span class="nf">firstOrNull</span><span class="p">()</span><span class="o">?.</span><span class="n">id</span><span class="o">?.</span><span class="nf">substringAfter</span><span class="p">(</span><span class="s">"#"</span><span class="p">)</span>
        <span class="o">?:</span> <span class="k">throw</span> <span class="nc">IllegalStateException</span><span class="p">(</span><span class="s">"No verification method found"</span><span class="p">)</span>

    <span class="kd">val</span> <span class="py">deviceDidResult</span> <span class="p">=</span> <span class="n">trustWeave</span><span class="p">.</span><span class="nf">createDid</span> <span class="p">{</span> <span class="nf">method</span><span class="p">(</span><span class="s">"key"</span><span class="p">)</span> <span class="p">}</span>
    <span class="kd">val</span> <span class="py">deviceDid</span> <span class="p">=</span> <span class="k">when</span> <span class="p">(</span><span class="n">deviceDidResult</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">is</span> <span class="nc">DidCreationResult</span><span class="p">.</span><span class="nc">Success</span> <span class="p">-&gt;</span> <span class="n">deviceDidResult</span><span class="p">.</span><span class="n">did</span>
        <span class="k">else</span> <span class="p">-&gt;</span> <span class="k">throw</span> <span class="nc">IllegalStateException</span><span class="p">(</span><span class="s">"Failed to create device DID: ${deviceDidResult.reason}"</span><span class="p">)</span>
    <span class="p">}</span>

    <span class="nf">println</span><span class="p">(</span><span class="s">"✅ Manufacturer DID: ${manufacturerDid.value}"</span><span class="p">)</span>
    <span class="nf">println</span><span class="p">(</span><span class="s">"✅ Current Owner DID: ${currentOwnerDid.value}"</span><span class="p">)</span>
    <span class="nf">println</span><span class="p">(</span><span class="s">"✅ New Owner DID: ${newOwnerDid.value}"</span><span class="p">)</span>
    <span class="nf">println</span><span class="p">(</span><span class="s">"✅ Device DID: ${deviceDid.value}"</span><span class="p">)</span>

    <span class="c1">// Step 3: Issue initial device ownership credential to current owner</span>
    <span class="kd">val</span> <span class="py">currentOwnershipCredential</span> <span class="p">=</span> <span class="nc">TrustWeave</span><span class="p">.</span><span class="nf">issueCredential</span><span class="p">(</span>
        <span class="n">issuerDid</span> <span class="p">=</span> <span class="n">manufacturerDid</span><span class="p">.</span><span class="n">value</span><span class="p">,</span>
        <span class="n">issuerKeyId</span> <span class="p">=</span> <span class="n">manufacturerKeyId</span><span class="p">,</span>
        <span class="n">credentialSubject</span> <span class="p">=</span> <span class="nf">buildJsonObject</span> <span class="p">{</span>
            <span class="nf">put</span><span class="p">(</span><span class="s">"id"</span><span class="p">,</span> <span class="n">deviceDid</span><span class="p">.</span><span class="n">value</span><span class="p">)</span>
            <span class="nf">put</span><span class="p">(</span><span class="s">"deviceOwnership"</span><span class="p">,</span> <span class="nf">buildJsonObject</span> <span class="p">{</span>
                <span class="nf">put</span><span class="p">(</span><span class="s">"deviceId"</span><span class="p">,</span> <span class="n">deviceDid</span><span class="p">.</span><span class="n">value</span><span class="p">)</span>
                <span class="nf">put</span><span class="p">(</span><span class="s">"ownerDid"</span><span class="p">,</span> <span class="n">currentOwnerDid</span><span class="p">.</span><span class="n">value</span><span class="p">)</span>
                <span class="nf">put</span><span class="p">(</span><span class="s">"ownershipDate"</span><span class="p">,</span> <span class="nc">Instant</span><span class="p">.</span><span class="nf">now</span><span class="p">().</span><span class="nf">minus</span><span class="p">(</span><span class="mi">365</span><span class="p">,</span> <span class="nc">ChronoUnit</span><span class="p">.</span><span class="nc">DAYS</span><span class="p">).</span><span class="nf">toString</span><span class="p">())</span>
                <span class="nf">put</span><span class="p">(</span><span class="s">"ownershipType"</span><span class="p">,</span> <span class="s">"Primary"</span><span class="p">)</span>
                <span class="nf">put</span><span class="p">(</span><span class="s">"transferable"</span><span class="p">,</span> <span class="k">true</span><span class="p">)</span>
                <span class="nf">put</span><span class="p">(</span><span class="s">"manufacturer"</span><span class="p">,</span> <span class="n">manufacturerDid</span><span class="p">.</span><span class="n">value</span><span class="p">)</span>
                <span class="nf">put</span><span class="p">(</span><span class="s">"deviceModel"</span><span class="p">,</span> <span class="s">"SmartHomeHub-2024"</span><span class="p">)</span>
                <span class="nf">put</span><span class="p">(</span><span class="s">"serialNumber"</span><span class="p">,</span> <span class="s">"SHH-2024-001234"</span><span class="p">)</span>
            <span class="p">})</span>
        <span class="p">},</span>
        <span class="n">types</span> <span class="p">=</span> <span class="nf">listOf</span><span class="p">(</span><span class="s">"VerifiableCredential"</span><span class="p">,</span> <span class="s">"DeviceOwnershipCredential"</span><span class="p">,</span> <span class="s">"IoTDeviceCredential"</span><span class="p">),</span>
        <span class="n">expirationDate</span> <span class="p">=</span> <span class="k">null</span> <span class="c1">// Ownership doesn't expire</span>
    <span class="p">).</span><span class="nf">getOrThrow</span><span class="p">()</span>

    <span class="nf">println</span><span class="p">(</span><span class="s">"\n✅ Current ownership credential issued: ${currentOwnershipCredential.id}"</span><span class="p">)</span>
    <span class="nf">println</span><span class="p">(</span><span class="s">"   Owner: ${currentOwnerDid.take(20)}..."</span><span class="p">)</span>
    <span class="nf">println</span><span class="p">(</span><span class="s">"   Ownership Date: ${Instant.now().minus(365, ChronoUnit.DAYS)}"</span><span class="p">)</span>

    <span class="c1">// Step 4: Create ownership transfer request credential</span>
    <span class="kd">val</span> <span class="py">transferRequestCredential</span> <span class="p">=</span> <span class="nc">TrustWeave</span><span class="p">.</span><span class="nf">issueCredential</span><span class="p">(</span>
        <span class="n">issuerDid</span> <span class="p">=</span> <span class="n">currentOwnerDid</span><span class="p">.</span><span class="n">value</span><span class="p">,</span>
        <span class="n">issuerKeyId</span> <span class="p">=</span> <span class="n">currentOwnerKeyId</span><span class="p">,</span>
        <span class="n">credentialSubject</span> <span class="p">=</span> <span class="nf">buildJsonObject</span> <span class="p">{</span>
            <span class="nf">put</span><span class="p">(</span><span class="s">"id"</span><span class="p">,</span> <span class="s">"transfer-request:${deviceDid.value}:${Instant.now().toEpochMilli()}"</span><span class="p">)</span>
            <span class="nf">put</span><span class="p">(</span><span class="s">"ownershipTransfer"</span><span class="p">,</span> <span class="nf">buildJsonObject</span> <span class="p">{</span>
                <span class="nf">put</span><span class="p">(</span><span class="s">"deviceId"</span><span class="p">,</span> <span class="n">deviceDid</span><span class="p">.</span><span class="n">value</span><span class="p">)</span>
                <span class="nf">put</span><span class="p">(</span><span class="s">"currentOwnerDid"</span><span class="p">,</span> <span class="n">currentOwnerDid</span><span class="p">.</span><span class="n">value</span><span class="p">)</span>
                <span class="nf">put</span><span class="p">(</span><span class="s">"newOwnerDid"</span><span class="p">,</span> <span class="n">newOwnerDid</span><span class="p">.</span><span class="n">value</span><span class="p">)</span>
                <span class="nf">put</span><span class="p">(</span><span class="s">"transferDate"</span><span class="p">,</span> <span class="nc">Instant</span><span class="p">.</span><span class="nf">now</span><span class="p">().</span><span class="nf">toString</span><span class="p">())</span>
                <span class="nf">put</span><span class="p">(</span><span class="s">"transferReason"</span><span class="p">,</span> <span class="s">"Sale"</span><span class="p">)</span>
                <span class="nf">put</span><span class="p">(</span><span class="s">"authorized"</span><span class="p">,</span> <span class="k">true</span><span class="p">)</span>
                <span class="nf">put</span><span class="p">(</span><span class="s">"transferConditions"</span><span class="p">,</span> <span class="nf">buildJsonObject</span> <span class="p">{</span>
                    <span class="nf">put</span><span class="p">(</span><span class="s">"deviceResetRequired"</span><span class="p">,</span> <span class="k">true</span><span class="p">)</span>
                    <span class="nf">put</span><span class="p">(</span><span class="s">"dataWipeRequired"</span><span class="p">,</span> <span class="k">true</span><span class="p">)</span>
                    <span class="nf">put</span><span class="p">(</span><span class="s">"warrantyTransfer"</span><span class="p">,</span> <span class="k">true</span><span class="p">)</span>
                <span class="p">})</span>
            <span class="p">})</span>
        <span class="p">},</span>
        <span class="n">types</span> <span class="p">=</span> <span class="nf">listOf</span><span class="p">(</span><span class="s">"VerifiableCredential"</span><span class="p">,</span> <span class="s">"OwnershipTransferRequestCredential"</span><span class="p">,</span> <span class="s">"TransferCredential"</span><span class="p">),</span>
        <span class="n">expirationDate</span> <span class="p">=</span> <span class="nc">Instant</span><span class="p">.</span><span class="nf">now</span><span class="p">().</span><span class="nf">plus</span><span class="p">(</span><span class="mi">7</span><span class="p">,</span> <span class="nc">ChronoUnit</span><span class="p">.</span><span class="nc">DAYS</span><span class="p">).</span><span class="nf">toString</span><span class="p">()</span> <span class="c1">// Transfer request expires</span>
    <span class="p">).</span><span class="nf">getOrThrow</span><span class="p">()</span>

    <span class="nf">println</span><span class="p">(</span><span class="s">"✅ Ownership transfer request credential issued: ${transferRequestCredential.id}"</span><span class="p">)</span>

    <span class="c1">// Step 5: Verify transfer request</span>
    <span class="nf">println</span><span class="p">(</span><span class="s">"\n🔍 Transfer Request Verification:"</span><span class="p">)</span>

    <span class="kd">val</span> <span class="py">transferRequestVerification</span> <span class="p">=</span> <span class="nc">TrustWeave</span><span class="p">.</span><span class="nf">verifyCredential</span><span class="p">(</span><span class="n">transferRequestCredential</span><span class="p">).</span><span class="nf">getOrThrow</span><span class="p">()</span>

    <span class="k">if</span> <span class="p">(</span><span class="n">transferRequestVerification</span><span class="p">.</span><span class="n">valid</span><span class="p">)</span> <span class="p">{</span>
        <span class="kd">val</span> <span class="py">credentialSubject</span> <span class="p">=</span> <span class="n">transferRequestCredential</span><span class="p">.</span><span class="n">credentialSubject</span>
        <span class="kd">val</span> <span class="py">transfer</span> <span class="p">=</span> <span class="n">credentialSubject</span><span class="p">.</span><span class="n">jsonObject</span><span class="p">[</span><span class="s">"ownershipTransfer"</span><span class="p">]</span><span class="o">?.</span><span class="n">jsonObject</span>
        <span class="kd">val</span> <span class="py">authorized</span> <span class="p">=</span> <span class="n">transfer</span><span class="o">?.</span><span class="k">get</span><span class="p">(</span><span class="s">"authorized"</span><span class="p">)</span><span class="o">?.</span><span class="n">jsonPrimitive</span><span class="o">?.</span><span class="n">content</span><span class="o">?.</span><span class="nf">toBoolean</span><span class="p">()</span> <span class="o">?:</span> <span class="k">false</span>
        <span class="kd">val</span> <span class="py">currentOwner</span> <span class="p">=</span> <span class="n">transfer</span><span class="o">?.</span><span class="k">get</span><span class="p">(</span><span class="s">"currentOwnerDid"</span><span class="p">)</span><span class="o">?.</span><span class="n">jsonPrimitive</span><span class="o">?.</span><span class="n">content</span>
        <span class="kd">val</span> <span class="py">newOwner</span> <span class="p">=</span> <span class="n">transfer</span><span class="o">?.</span><span class="k">get</span><span class="p">(</span><span class="s">"newOwnerDid"</span><span class="p">)</span><span class="o">?.</span><span class="n">jsonPrimitive</span><span class="o">?.</span><span class="n">content</span>

        <span class="nf">println</span><span class="p">(</span><span class="s">"✅ Transfer Request Credential: VALID"</span><span class="p">)</span>
        <span class="nf">println</span><span class="p">(</span><span class="s">"   Current Owner: ${currentOwner?.take(20)}..."</span><span class="p">)</span>
        <span class="nf">println</span><span class="p">(</span><span class="s">"   New Owner: ${newOwner?.take(20)}..."</span><span class="p">)</span>
        <span class="nf">println</span><span class="p">(</span><span class="s">"   Authorized: $authorized"</span><span class="p">)</span>

        <span class="k">if</span> <span class="p">(</span><span class="n">authorized</span> <span class="p">&amp;&amp;</span> <span class="n">currentOwner</span> <span class="p">==</span> <span class="n">currentOwnerDid</span><span class="p">.</span><span class="n">value</span><span class="p">)</span> <span class="p">{</span>
            <span class="nf">println</span><span class="p">(</span><span class="s">"✅ Transfer request verified"</span><span class="p">)</span>
            <span class="nf">println</span><span class="p">(</span><span class="s">"✅ Current owner authorized transfer"</span><span class="p">)</span>
        <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
            <span class="nf">println</span><span class="p">(</span><span class="s">"❌ Transfer request not verified"</span><span class="p">)</span>
            <span class="nf">println</span><span class="p">(</span><span class="s">"❌ Transfer not authorized"</span><span class="p">)</span>
        <span class="p">}</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="nf">println</span><span class="p">(</span><span class="s">"❌ Transfer Request Credential: INVALID"</span><span class="p">)</span>
        <span class="nf">println</span><span class="p">(</span><span class="s">"❌ Transfer request not verified"</span><span class="p">)</span>
    <span class="p">}</span>

    <span class="c1">// Step 6: Issue new ownership credential to new owner</span>
    <span class="kd">val</span> <span class="py">newOwnershipCredential</span> <span class="p">=</span> <span class="nc">TrustWeave</span><span class="p">.</span><span class="nf">issueCredential</span><span class="p">(</span>
        <span class="n">issuerDid</span> <span class="p">=</span> <span class="n">manufacturerDid</span><span class="p">.</span><span class="n">value</span><span class="p">,</span>
        <span class="n">issuerKeyId</span> <span class="p">=</span> <span class="n">manufacturerKeyId</span><span class="p">,</span>
        <span class="n">credentialSubject</span> <span class="p">=</span> <span class="nf">buildJsonObject</span> <span class="p">{</span>
            <span class="nf">put</span><span class="p">(</span><span class="s">"id"</span><span class="p">,</span> <span class="n">deviceDid</span><span class="p">.</span><span class="n">value</span><span class="p">)</span>
            <span class="nf">put</span><span class="p">(</span><span class="s">"deviceOwnership"</span><span class="p">,</span> <span class="nf">buildJsonObject</span> <span class="p">{</span>
                <span class="nf">put</span><span class="p">(</span><span class="s">"deviceId"</span><span class="p">,</span> <span class="n">deviceDid</span><span class="p">.</span><span class="n">value</span><span class="p">)</span>
                <span class="nf">put</span><span class="p">(</span><span class="s">"ownerDid"</span><span class="p">,</span> <span class="n">newOwnerDid</span><span class="p">.</span><span class="n">value</span><span class="p">)</span>
                <span class="nf">put</span><span class="p">(</span><span class="s">"ownershipDate"</span><span class="p">,</span> <span class="nc">Instant</span><span class="p">.</span><span class="nf">now</span><span class="p">().</span><span class="nf">toString</span><span class="p">())</span>
                <span class="nf">put</span><span class="p">(</span><span class="s">"ownershipType"</span><span class="p">,</span> <span class="s">"Primary"</span><span class="p">)</span>
                <span class="nf">put</span><span class="p">(</span><span class="s">"transferable"</span><span class="p">,</span> <span class="k">true</span><span class="p">)</span>
                <span class="nf">put</span><span class="p">(</span><span class="s">"previousOwnerDid"</span><span class="p">,</span> <span class="n">currentOwnerDid</span><span class="p">.</span><span class="n">value</span><span class="p">)</span>
                <span class="nf">put</span><span class="p">(</span><span class="s">"transferDate"</span><span class="p">,</span> <span class="nc">Instant</span><span class="p">.</span><span class="nf">now</span><span class="p">().</span><span class="nf">toString</span><span class="p">())</span>
                <span class="nf">put</span><span class="p">(</span><span class="s">"transferReference"</span><span class="p">,</span> <span class="n">transferRequestCredential</span><span class="p">.</span><span class="n">id</span><span class="p">)</span>
                <span class="nf">put</span><span class="p">(</span><span class="s">"manufacturer"</span><span class="p">,</span> <span class="n">manufacturerDid</span><span class="p">.</span><span class="n">value</span><span class="p">)</span>
                <span class="nf">put</span><span class="p">(</span><span class="s">"deviceModel"</span><span class="p">,</span> <span class="s">"SmartHomeHub-2024"</span><span class="p">)</span>
                <span class="nf">put</span><span class="p">(</span><span class="s">"serialNumber"</span><span class="p">,</span> <span class="s">"SHH-2024-001234"</span><span class="p">)</span>
                <span class="nf">put</span><span class="p">(</span><span class="s">"ownershipHistory"</span><span class="p">,</span> <span class="nf">buildJsonObject</span> <span class="p">{</span>
                    <span class="nf">put</span><span class="p">(</span><span class="s">"transferCount"</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
                    <span class="nf">put</span><span class="p">(</span><span class="s">"previousOwners"</span><span class="p">,</span> <span class="nf">listOf</span><span class="p">(</span><span class="n">currentOwnerDid</span><span class="p">.</span><span class="n">value</span><span class="p">))</span>
                <span class="p">})</span>
            <span class="p">})</span>
        <span class="p">},</span>
        <span class="n">types</span> <span class="p">=</span> <span class="nf">listOf</span><span class="p">(</span><span class="s">"VerifiableCredential"</span><span class="p">,</span> <span class="s">"DeviceOwnershipCredential"</span><span class="p">,</span> <span class="s">"IoTDeviceCredential"</span><span class="p">),</span>
        <span class="n">expirationDate</span> <span class="p">=</span> <span class="k">null</span>
    <span class="p">).</span><span class="nf">getOrThrow</span><span class="p">()</span>

    <span class="nf">println</span><span class="p">(</span><span class="s">"\n✅ New ownership credential issued: ${newOwnershipCredential.id}"</span><span class="p">)</span>
    <span class="nf">println</span><span class="p">(</span><span class="s">"   New Owner: ${newOwnerDid.take(20)}..."</span><span class="p">)</span>
    <span class="nf">println</span><span class="p">(</span><span class="s">"   Ownership Date: ${Instant.now()}"</span><span class="p">)</span>

    <span class="c1">// Step 7: Create wallets for current and new owners</span>
    <span class="kd">val</span> <span class="py">currentOwnerWalletResult</span> <span class="p">=</span> <span class="n">trustWeave</span><span class="p">.</span><span class="nf">wallet</span> <span class="p">{</span>
        <span class="nf">holder</span><span class="p">(</span><span class="n">currentOwnerDid</span><span class="p">.</span><span class="n">value</span><span class="p">)</span>
        <span class="nf">enableOrganization</span><span class="p">()</span>
        <span class="nf">enablePresentation</span><span class="p">()</span>
    <span class="p">}</span>
    
    <span class="kd">val</span> <span class="py">currentOwnerWallet</span> <span class="p">=</span> <span class="k">when</span> <span class="p">(</span><span class="n">currentOwnerWalletResult</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">is</span> <span class="nc">WalletCreationResult</span><span class="p">.</span><span class="nc">Success</span> <span class="p">-&gt;</span> <span class="n">currentOwnerWalletResult</span><span class="p">.</span><span class="n">wallet</span>
        <span class="k">else</span> <span class="p">-&gt;</span> <span class="k">throw</span> <span class="nc">IllegalStateException</span><span class="p">(</span><span class="s">"Failed to create current owner wallet: ${currentOwnerWalletResult.reason}"</span><span class="p">)</span>
    <span class="p">}</span>

    <span class="kd">val</span> <span class="py">newOwnerWalletResult</span> <span class="p">=</span> <span class="n">trustWeave</span><span class="p">.</span><span class="nf">wallet</span> <span class="p">{</span>
        <span class="nf">holder</span><span class="p">(</span><span class="n">newOwnerDid</span><span class="p">.</span><span class="n">value</span><span class="p">)</span>
        <span class="nf">enableOrganization</span><span class="p">()</span>
        <span class="nf">enablePresentation</span><span class="p">()</span>
    <span class="p">}</span>
    
    <span class="kd">val</span> <span class="py">newOwnerWallet</span> <span class="p">=</span> <span class="k">when</span> <span class="p">(</span><span class="n">newOwnerWalletResult</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">is</span> <span class="nc">WalletCreationResult</span><span class="p">.</span><span class="nc">Success</span> <span class="p">-&gt;</span> <span class="n">newOwnerWalletResult</span><span class="p">.</span><span class="n">wallet</span>
        <span class="k">else</span> <span class="p">-&gt;</span> <span class="k">throw</span> <span class="nc">IllegalStateException</span><span class="p">(</span><span class="s">"Failed to create new owner wallet: ${newOwnerWalletResult.reason}"</span><span class="p">)</span>
    <span class="p">}</span>

    <span class="kd">val</span> <span class="py">currentOwnershipId</span> <span class="p">=</span> <span class="n">currentOwnerWallet</span><span class="p">.</span><span class="nf">store</span><span class="p">(</span><span class="n">currentOwnershipCredential</span><span class="p">)</span>
    <span class="kd">val</span> <span class="py">transferRequestId</span> <span class="p">=</span> <span class="n">currentOwnerWallet</span><span class="p">.</span><span class="nf">store</span><span class="p">(</span><span class="n">transferRequestCredential</span><span class="p">)</span>
    <span class="kd">val</span> <span class="py">newOwnershipId</span> <span class="p">=</span> <span class="n">newOwnerWallet</span><span class="p">.</span><span class="nf">store</span><span class="p">(</span><span class="n">newOwnershipCredential</span><span class="p">)</span>

    <span class="nf">println</span><span class="p">(</span><span class="s">"\n✅ Credentials stored in owner wallets"</span><span class="p">)</span>

    <span class="c1">// Step 8: Organize credentials</span>
    <span class="n">currentOwnerWallet</span><span class="p">.</span><span class="nf">withOrganization</span> <span class="p">{</span> <span class="n">org</span> <span class="p">-&gt;</span>
        <span class="kd">val</span> <span class="py">ownershipCollectionId</span> <span class="p">=</span> <span class="n">org</span><span class="p">.</span><span class="nf">createCollection</span><span class="p">(</span><span class="s">"Device Ownership"</span><span class="p">,</span> <span class="s">"Device ownership credentials"</span><span class="p">)</span>
        <span class="n">org</span><span class="p">.</span><span class="nf">addToCollection</span><span class="p">(</span><span class="n">currentOwnershipId</span><span class="p">,</span> <span class="n">ownershipCollectionId</span><span class="p">)</span>
        <span class="n">org</span><span class="p">.</span><span class="nf">addToCollection</span><span class="p">(</span><span class="n">transferRequestId</span><span class="p">,</span> <span class="n">ownershipCollectionId</span><span class="p">)</span>
        <span class="n">org</span><span class="p">.</span><span class="nf">tagCredential</span><span class="p">(</span><span class="n">currentOwnershipId</span><span class="p">,</span> <span class="nf">setOf</span><span class="p">(</span><span class="s">"ownership"</span><span class="p">,</span> <span class="s">"device"</span><span class="p">,</span> <span class="s">"revoked"</span><span class="p">))</span>
        <span class="n">org</span><span class="p">.</span><span class="nf">tagCredential</span><span class="p">(</span><span class="n">transferRequestId</span><span class="p">,</span> <span class="nf">setOf</span><span class="p">(</span><span class="s">"transfer"</span><span class="p">,</span> <span class="s">"request"</span><span class="p">,</span> <span class="s">"completed"</span><span class="p">))</span>
        <span class="nf">println</span><span class="p">(</span><span class="s">"✅ Current owner credentials organized"</span><span class="p">)</span>
    <span class="p">}</span>

    <span class="n">newOwnerWallet</span><span class="p">.</span><span class="nf">withOrganization</span> <span class="p">{</span> <span class="n">org</span> <span class="p">-&gt;</span>
        <span class="kd">val</span> <span class="py">ownershipCollectionId</span> <span class="p">=</span> <span class="n">org</span><span class="p">.</span><span class="nf">createCollection</span><span class="p">(</span><span class="s">"Device Ownership"</span><span class="p">,</span> <span class="s">"Device ownership credentials"</span><span class="p">)</span>
        <span class="n">org</span><span class="p">.</span><span class="nf">addToCollection</span><span class="p">(</span><span class="n">newOwnershipId</span><span class="p">,</span> <span class="n">ownershipCollectionId</span><span class="p">)</span>
        <span class="n">org</span><span class="p">.</span><span class="nf">tagCredential</span><span class="p">(</span><span class="n">newOwnershipId</span><span class="p">,</span> <span class="nf">setOf</span><span class="p">(</span><span class="s">"ownership"</span><span class="p">,</span> <span class="s">"device"</span><span class="p">,</span> <span class="s">"active"</span><span class="p">))</span>
        <span class="nf">println</span><span class="p">(</span><span class="s">"✅ New owner credentials organized"</span><span class="p">)</span>
    <span class="p">}</span>

    <span class="c1">// Step 9: Verify new ownership</span>
    <span class="nf">println</span><span class="p">(</span><span class="s">"\n🔍 New Ownership Verification:"</span><span class="p">)</span>

    <span class="kd">val</span> <span class="py">newOwnershipVerification</span> <span class="p">=</span> <span class="nc">TrustWeave</span><span class="p">.</span><span class="nf">verifyCredential</span><span class="p">(</span><span class="n">newOwnershipCredential</span><span class="p">).</span><span class="nf">getOrThrow</span><span class="p">()</span>

    <span class="k">if</span> <span class="p">(</span><span class="n">newOwnershipVerification</span><span class="p">.</span><span class="n">valid</span><span class="p">)</span> <span class="p">{</span>
        <span class="kd">val</span> <span class="py">credentialSubject</span> <span class="p">=</span> <span class="n">newOwnershipCredential</span><span class="p">.</span><span class="n">credentialSubject</span>
        <span class="kd">val</span> <span class="py">ownership</span> <span class="p">=</span> <span class="n">credentialSubject</span><span class="p">.</span><span class="n">jsonObject</span><span class="p">[</span><span class="s">"deviceOwnership"</span><span class="p">]</span><span class="o">?.</span><span class="n">jsonObject</span>
        <span class="kd">val</span> <span class="py">ownerDid</span> <span class="p">=</span> <span class="n">ownership</span><span class="o">?.</span><span class="k">get</span><span class="p">(</span><span class="s">"ownerDid"</span><span class="p">)</span><span class="o">?.</span><span class="n">jsonPrimitive</span><span class="o">?.</span><span class="n">content</span>
        <span class="kd">val</span> <span class="py">previousOwner</span> <span class="p">=</span> <span class="n">ownership</span><span class="o">?.</span><span class="k">get</span><span class="p">(</span><span class="s">"previousOwnerDid"</span><span class="p">)</span><span class="o">?.</span><span class="n">jsonPrimitive</span><span class="o">?.</span><span class="n">content</span>
        <span class="kd">val</span> <span class="py">transferDate</span> <span class="p">=</span> <span class="n">ownership</span><span class="o">?.</span><span class="k">get</span><span class="p">(</span><span class="s">"transferDate"</span><span class="p">)</span><span class="o">?.</span><span class="n">jsonPrimitive</span><span class="o">?.</span><span class="n">content</span>

        <span class="nf">println</span><span class="p">(</span><span class="s">"✅ New Ownership Credential: VALID"</span><span class="p">)</span>
        <span class="nf">println</span><span class="p">(</span><span class="s">"   Current Owner: ${ownerDid?.take(20)}..."</span><span class="p">)</span>
        <span class="nf">println</span><span class="p">(</span><span class="s">"   Previous Owner: ${previousOwner?.take(20)}..."</span><span class="p">)</span>
        <span class="nf">println</span><span class="p">(</span><span class="s">"   Transfer Date: $transferDate"</span><span class="p">)</span>

        <span class="k">if</span> <span class="p">(</span><span class="n">ownerDid</span> <span class="p">==</span> <span class="n">newOwnerDid</span><span class="p">.</span><span class="n">value</span><span class="p">)</span> <span class="p">{</span>
            <span class="nf">println</span><span class="p">(</span><span class="s">"✅ New ownership verified"</span><span class="p">)</span>
            <span class="nf">println</span><span class="p">(</span><span class="s">"✅ New owner is authorized"</span><span class="p">)</span>
        <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
            <span class="nf">println</span><span class="p">(</span><span class="s">"❌ New ownership not verified"</span><span class="p">)</span>
            <span class="nf">println</span><span class="p">(</span><span class="s">"❌ New owner is not authorized"</span><span class="p">)</span>
        <span class="p">}</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="nf">println</span><span class="p">(</span><span class="s">"❌ New Ownership Credential: INVALID"</span><span class="p">)</span>
        <span class="nf">println</span><span class="p">(</span><span class="s">"❌ New ownership not verified"</span><span class="p">)</span>
    <span class="p">}</span>

    <span class="c1">// Step 10: Verify previous owner revocation</span>
    <span class="nf">println</span><span class="p">(</span><span class="s">"\n🔍 Previous Owner Revocation Verification:"</span><span class="p">)</span>

    <span class="kd">val</span> <span class="py">currentOwnershipVerification</span> <span class="p">=</span> <span class="nc">TrustWeave</span><span class="p">.</span><span class="nf">verifyCredential</span><span class="p">(</span><span class="n">currentOwnershipCredential</span><span class="p">).</span><span class="nf">getOrThrow</span><span class="p">()</span>

    <span class="k">if</span> <span class="p">(</span><span class="n">currentOwnershipVerification</span><span class="p">.</span><span class="n">valid</span><span class="p">)</span> <span class="p">{</span>
        <span class="kd">val</span> <span class="py">credentialSubject</span> <span class="p">=</span> <span class="n">currentOwnershipCredential</span><span class="p">.</span><span class="n">credentialSubject</span>
        <span class="kd">val</span> <span class="py">ownership</span> <span class="p">=</span> <span class="n">credentialSubject</span><span class="p">.</span><span class="n">jsonObject</span><span class="p">[</span><span class="s">"deviceOwnership"</span><span class="p">]</span><span class="o">?.</span><span class="n">jsonObject</span>
        <span class="kd">val</span> <span class="py">ownerDid</span> <span class="p">=</span> <span class="n">ownership</span><span class="o">?.</span><span class="k">get</span><span class="p">(</span><span class="s">"ownerDid"</span><span class="p">)</span><span class="o">?.</span><span class="n">jsonPrimitive</span><span class="o">?.</span><span class="n">content</span>

        <span class="nf">println</span><span class="p">(</span><span class="s">"✅ Previous Ownership Credential: VALID (structurally)"</span><span class="p">)</span>
        <span class="nf">println</span><span class="p">(</span><span class="s">"   Previous Owner: ${ownerDid?.take(20)}..."</span><span class="p">)</span>

        <span class="c1">// In production, this credential would be revoked</span>
        <span class="c1">// For this example, we check if owner matches current owner</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">ownerDid</span> <span class="p">==</span> <span class="n">currentOwnerDid</span><span class="p">.</span><span class="n">value</span><span class="p">)</span> <span class="p">{</span>
            <span class="nf">println</span><span class="p">(</span><span class="s">"⚠️  Previous owner credential still exists"</span><span class="p">)</span>
            <span class="nf">println</span><span class="p">(</span><span class="s">"⚠️  Previous owner access should be revoked"</span><span class="p">)</span>
            <span class="nf">println</span><span class="p">(</span><span class="s">"✅ Revocation process should be initiated"</span><span class="p">)</span>
        <span class="p">}</span>
    <span class="p">}</span>

    <span class="c1">// Step 11: Ownership history tracking</span>
    <span class="nf">println</span><span class="p">(</span><span class="s">"\n📜 Ownership History Tracking:"</span><span class="p">)</span>

    <span class="kd">val</span> <span class="py">newOwnership</span> <span class="p">=</span> <span class="n">newOwnershipCredential</span><span class="p">.</span><span class="n">credentialSubject</span><span class="p">.</span><span class="n">jsonObject</span><span class="p">[</span><span class="s">"deviceOwnership"</span><span class="p">]</span><span class="o">?.</span><span class="n">jsonObject</span>
    <span class="kd">val</span> <span class="py">ownershipHistory</span> <span class="p">=</span> <span class="n">newOwnership</span><span class="o">?.</span><span class="k">get</span><span class="p">(</span><span class="s">"ownershipHistory"</span><span class="p">)</span><span class="o">?.</span><span class="n">jsonObject</span>
    <span class="kd">val</span> <span class="py">transferCount</span> <span class="p">=</span> <span class="n">ownershipHistory</span><span class="o">?.</span><span class="k">get</span><span class="p">(</span><span class="s">"transferCount"</span><span class="p">)</span><span class="o">?.</span><span class="n">jsonPrimitive</span><span class="o">?.</span><span class="n">content</span><span class="o">?.</span><span class="nf">toInt</span><span class="p">()</span> <span class="o">?:</span> <span class="mi">0</span>
    <span class="kd">val</span> <span class="py">previousOwners</span> <span class="p">=</span> <span class="n">ownershipHistory</span><span class="o">?.</span><span class="k">get</span><span class="p">(</span><span class="s">"previousOwners"</span><span class="p">)</span><span class="o">?.</span><span class="n">jsonArray</span>

    <span class="nf">println</span><span class="p">(</span><span class="s">"   Transfer Count: $transferCount"</span><span class="p">)</span>
    <span class="nf">println</span><span class="p">(</span><span class="s">"   Previous Owners: ${previousOwners?.size ?: 0}"</span><span class="p">)</span>
    <span class="n">previousOwners</span><span class="o">?.</span><span class="nf">forEachIndexed</span> <span class="p">{</span> <span class="n">index</span><span class="p">,</span> <span class="n">owner</span> <span class="p">-&gt;</span>
        <span class="nf">println</span><span class="p">(</span><span class="s">"     ${index + 1}. ${owner.jsonPrimitive.content.take(20)}..."</span><span class="p">)</span>
    <span class="p">}</span>
    <span class="nf">println</span><span class="p">(</span><span class="s">"✅ Complete ownership history tracked"</span><span class="p">)</span>

    <span class="c1">// Step 12: Display wallet statistics</span>
    <span class="kd">val</span> <span class="py">currentOwnerStats</span> <span class="p">=</span> <span class="n">currentOwnerWallet</span><span class="p">.</span><span class="nf">getStatistics</span><span class="p">()</span>
    <span class="kd">val</span> <span class="py">newOwnerStats</span> <span class="p">=</span> <span class="n">newOwnerWallet</span><span class="p">.</span><span class="nf">getStatistics</span><span class="p">()</span>

    <span class="nf">println</span><span class="p">(</span><span class="s">"\n📊 Current Owner Wallet Statistics:"</span><span class="p">)</span>
    <span class="nf">println</span><span class="p">(</span><span class="s">"   Total credentials: ${currentOwnerStats.totalCredentials}"</span><span class="p">)</span>
    <span class="nf">println</span><span class="p">(</span><span class="s">"   Valid credentials: ${currentOwnerStats.validCredentials}"</span><span class="p">)</span>
    <span class="nf">println</span><span class="p">(</span><span class="s">"   Collections: ${currentOwnerStats.collectionsCount}"</span><span class="p">)</span>
    <span class="nf">println</span><span class="p">(</span><span class="s">"   Tags: ${currentOwnerStats.tagsCount}"</span><span class="p">)</span>

    <span class="nf">println</span><span class="p">(</span><span class="s">"\n📊 New Owner Wallet Statistics:"</span><span class="p">)</span>
    <span class="nf">println</span><span class="p">(</span><span class="s">"   Total credentials: ${newOwnerStats.totalCredentials}"</span><span class="p">)</span>
    <span class="nf">println</span><span class="p">(</span><span class="s">"   Valid credentials: ${newOwnerStats.validCredentials}"</span><span class="p">)</span>
    <span class="nf">println</span><span class="p">(</span><span class="s">"   Collections: ${newOwnerStats.collectionsCount}"</span><span class="p">)</span>
    <span class="nf">println</span><span class="p">(</span><span class="s">"   Tags: ${newOwnerStats.tagsCount}"</span><span class="p">)</span>

    <span class="c1">// Step 13: Summary</span>
    <span class="nf">println</span><span class="p">(</span><span class="s">"\n"</span> <span class="p">+</span> <span class="s">"="</span><span class="p">.</span><span class="nf">repeat</span><span class="p">(</span><span class="mi">70</span><span class="p">))</span>
    <span class="nf">println</span><span class="p">(</span><span class="s">"✅ IoT DEVICE OWNERSHIP TRANSFER SYSTEM COMPLETE"</span><span class="p">)</span>
    <span class="nf">println</span><span class="p">(</span><span class="s">"   Ownership transfer credentials created"</span><span class="p">)</span>
    <span class="nf">println</span><span class="p">(</span><span class="s">"   New ownership credential issued"</span><span class="p">)</span>
    <span class="nf">println</span><span class="p">(</span><span class="s">"   Previous owner revocation process initiated"</span><span class="p">)</span>
    <span class="nf">println</span><span class="p">(</span><span class="s">"   Complete ownership history tracked"</span><span class="p">)</span>
    <span class="nf">println</span><span class="p">(</span><span class="s">"   Secure ownership handoff established"</span><span class="p">)</span>
    <span class="nf">println</span><span class="p">(</span><span class="s">"="</span><span class="p">.</span><span class="nf">repeat</span><span class="p">(</span><span class="mi">70</span><span class="p">))</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></div></code></pre></div></div>

<p><strong>Expected Output:</strong></p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code><div class="table-wrapper"><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
</pre></td><td class="rouge-code"><pre>======================================================================
IoT Device Ownership Transfer Scenario - Complete End-to-End Example
======================================================================

✅ TrustWeave initialized
✅ Manufacturer DID: did:key:z6Mk...
✅ Current Owner DID: did:key:z6Mk...
✅ New Owner DID: did:key:z6Mk...
✅ Device DID: did:key:z6Mk...

✅ Current ownership credential issued: urn:uuid:...
   Owner: did:key:z6Mk...
   Ownership Date: 2023-11-18T...
✅ Ownership transfer request credential issued: urn:uuid:...

🔍 Transfer Request Verification:
✅ Transfer Request Credential: VALID
   Current Owner: did:key:z6Mk...
   New Owner: did:key:z6Mk...
   Authorized: true
✅ Transfer request verified
✅ Current owner authorized transfer

✅ New ownership credential issued: urn:uuid:...
   New Owner: did:key:z6Mk...
   Ownership Date: 2024-11-18T...

✅ Credentials stored in owner wallets
✅ Current owner credentials organized
✅ New owner credentials organized

🔍 New Ownership Verification:
✅ New Ownership Credential: VALID
   Current Owner: did:key:z6Mk...
   Previous Owner: did:key:z6Mk...
   Transfer Date: 2024-11-18T...
✅ New ownership verified
✅ New owner is authorized

🔍 Previous Owner Revocation Verification:
✅ Previous Ownership Credential: VALID (structurally)
   Previous Owner: did:key:z6Mk...
⚠️  Previous owner credential still exists
⚠️  Previous owner access should be revoked
✅ Revocation process should be initiated

📜 Ownership History Tracking:
   Transfer Count: 1
   Previous Owners: 1
     1. did:key:z6Mk...
✅ Complete ownership history tracked

📊 Current Owner Wallet Statistics:
   Total credentials: 2
   Valid credentials: 2
   Collections: 1
   Tags: 4

📊 New Owner Wallet Statistics:
   Total credentials: 1
   Valid credentials: 1
   Collections: 1
   Tags: 2

======================================================================
✅ IoT DEVICE OWNERSHIP TRANSFER SYSTEM COMPLETE
   Ownership transfer credentials created
   New ownership credential issued
   Previous owner revocation process initiated
   Complete ownership history tracked
   Secure ownership handoff established
======================================================================
</pre></td></tr></tbody></table></div></code></pre></div></div>
<h2 id="key-features-demonstrated">
  
  
    <a href="#key-features-demonstrated" class="anchor-heading" aria-labelledby="key-features-demonstrated"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Key Features Demonstrated
  
  
</h2>
    

<ol>
  <li><strong>Ownership Transfer</strong>: Secure transfer of device ownership</li>
  <li><strong>Transfer Authorization</strong>: Verify transfer authorization</li>
  <li><strong>New Ownership</strong>: Issue new ownership credentials</li>
  <li><strong>Previous Owner Revocation</strong>: Revoke previous owner access</li>
  <li><strong>Ownership History</strong>: Track complete ownership history</li>
  <li><strong>Audit Trail</strong>: Complete audit trail of transfers</li>
</ol>
<h2 id="real-world-extensions">
  
  
    <a href="#real-world-extensions" class="anchor-heading" aria-labelledby="real-world-extensions"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Real-World Extensions
  
  
</h2>
    

<ul>
  <li><strong>Multi-Owner Support</strong>: Support multiple owners (co-ownership)</li>
  <li><strong>Ownership Delegation</strong>: Delegate device access without transferring ownership</li>
  <li><strong>Ownership Verification</strong>: Verify ownership before device access</li>
  <li><strong>Transfer Marketplace</strong>: Integrate with device resale marketplaces</li>
  <li><strong>Warranty Transfer</strong>: Transfer warranty information with ownership</li>
  <li><strong>Blockchain Anchoring</strong>: Anchor ownership transfers for permanent records</li>
  <li><strong>Compliance</strong>: Automated compliance with ownership tracking regulations</li>
</ul>
<h2 id="related-documentation">
  
  
    <a href="#related-documentation" class="anchor-heading" aria-labelledby="related-documentation"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Related Documentation
  
  
</h2>
    

<ul>
  <li><a href="/trustweave/getting-started/quick-start/">Quick Start</a> - Get started with TrustWeave</li>
  <li><a href="/trustweave/scenarios/iot-device-identity-scenario/">IoT Device Identity Scenario</a> - Related device identity scenario</li>
  <li><a href="/trustweave/getting-started/common-patterns/">Common Patterns</a> - Reusable code patterns</li>
  <li><a href="/trustweave/api-reference/core-api/">API Reference</a> - Complete API documentation</li>
  <li><a href="/trustweave/getting-started/troubleshooting/">Troubleshooting</a> - Common issues and solutions</li>
</ul>

          

          
            
          
        </main>
        

  <hr>
  <footer>
    

    <!-- Hidden template for footer injection -->
<div id="footer-template" style="display: none;">
  <!-- Site Footer - Consistent across all pages -->
<footer class="site-footer">
    <div class="footer-content">
        <div class="footer-links">
            <a href="/trustweave/">Home</a>
            <a href="/trustweave/getting-started/README/">Documentation</a>
            <a href="https://github.com/geoknoesis/TrustWeave" target="_blank">GitHub</a>
            <a href="/trustweave/partnership/">Partners</a>
            <a href="https://github.com/geoknoesis/TrustWeave/blob/main/docs/README.md" target="_blank">Docs</a>
            <a href="https://github.com/geoknoesis/TrustWeave/blob/main/LICENSE" target="_blank">License</a>
            <a href="https://www.geoknoesis.com" target="_blank">Geoknoesis LLC</a>
        </div>
        <p class="footer-text">Made with ❤️ by Geoknoesis LLC</p>
    </div>
</footer>


</div>
<script>
  // Move footer from template to body bottom and make it full width
  document.addEventListener('DOMContentLoaded', function() {
    const template = document.getElementById('footer-template');
    if (template) {
      const footer = template.querySelector('.site-footer');
      if (footer) {
        // Move footer to body level (outside of any containers)
        document.body.appendChild(footer);
        template.remove();

        // Ensure footer spans full width by removing any parent constraints
        footer.style.position = 'relative';
        footer.style.width = '100vw';
        footer.style.marginLeft = 'calc(-50vw + 50%)';
        footer.style.marginRight = 'calc(-50vw + 50%)';
        footer.style.marginTop = 'auto'; // Push to bottom in flexbox layout
        footer.style.zIndex = '0'; // Below search overlay
      }
    }

    // Function to update footer visibility based on search state
    function updateFooterVisibility() {
      const footer = document.querySelector('.site-footer');
      const htmlElement = document.documentElement;

      if (footer && htmlElement) {
        const isSearchActive = htmlElement.classList.contains('search-active');
        if (isSearchActive) {
          // Hide footer when search is active - use multiple methods to ensure it's hidden
          footer.style.display = 'none';
          footer.style.visibility = 'hidden';
          footer.style.opacity = '0';
          footer.style.zIndex = '-999';
          footer.style.pointerEvents = 'none';
        } else {
          // Show footer when search is not active
          footer.style.display = 'block';
          footer.style.visibility = 'visible';
          footer.style.opacity = '1';
          footer.style.marginTop = 'auto';
          footer.style.position = 'relative';
          footer.style.zIndex = '-1';
          footer.style.pointerEvents = 'auto';
        }
      }
    }

    // Monitor search state and hide/show footer appropriately
    const observer = new MutationObserver(function(mutations) {
      updateFooterVisibility();
    });

    // Also listen for input events on search input as a backup
    // This ensures footer is hidden immediately when user starts typing
    const searchInput = document.getElementById('search-input');
    if (searchInput) {
      // Use requestAnimationFrame for better performance
      const handleSearchChange = function() {
        requestAnimationFrame(updateFooterVisibility);
      };

      searchInput.addEventListener('input', handleSearchChange);
      searchInput.addEventListener('focus', handleSearchChange);
      searchInput.addEventListener('keydown', handleSearchChange);
    }

    // Observe documentElement (html) for class changes (like search-active)
    // The search script adds 'search-active' to documentElement, not body
    if (document.documentElement) {
      observer.observe(document.documentElement, {
        attributes: true,
        attributeFilter: ['class']
      });

      // Initial check
      updateFooterVisibility();
    }
  });
</script>


    
  </footer>


      </div>
    </div>
    
      

<div class="search-overlay"></div>

    
  </div>

  
    





<script type="module">
  
  import mermaid from 'https://cdn.jsdelivr.net/npm/mermaid@10.6.1/dist/mermaid.esm.min.mjs';
  

  var config = {}
;
  mermaid.initialize(config);
  mermaid.run({
    querySelector: '.language-mermaid',
  });
</script>



  
</body>
</html>

