---
title: Decentralized Identifiers (DIDs)
nav_order: 2
parent: Core Concepts
---

# Decentralized Identifiers (DIDs)

> TrustWeave is created and supported by [Geoknoesis LLC](https://www.geoknoesis.com). The project reflects Geoknoesis’ reference architecture for decentralized trust.

## What is a DID?

A **Decentralized Identifier (DID)** is a self-sovereign identifier controlled by its subject. It follows the `did:method:identifier` pattern—for example:

```kotlin
dependencies {
    implementation("com.trustweave:trustweave-did:1.0.0-SNAPSHOT")
    implementation("com.trustweave:trustweave-common:1.0.0-SNAPSHOT")
}
```

**Result:** Pulls the DID registry, builders, and data models into your project so the examples below compile.

```
did:key:z6MkhaXgBZDvotDkL5257faiztiGiC2QtKLGpbnnEGta2doK
did:web:example.com:user:alice
did:ion:EiClkZMDnmYGhX8tR8i3z2b5M5fN5hJ5vK5xL5yM5zN5oP5q
```

Resolving a DID yields a **DID Document**, a JSON-LD structure listing public keys, services, and capabilities that prove control of the identifier. TrustWeave serialises these documents using Kotlinx Serialization so they remain strongly typed.

## Why DIDs matter in TrustWeave

- **Identity anchor** – issuers, holders, verifiers, and services use DIDs as their canonical identifier during credential issuance and verification.
- **Portability** – you can switch DID methods (key, web, Ion, etc.) without rewriting business logic; only the registry wiring changes.
- **Foundation for proofs** – verifier flows fetch DID documents to validate signatures created during issuance (see the [Architecture Overview](../introduction/architecture-overview.md)).

## How TrustWeave models DIDs

| Component | Purpose |
|-----------|---------|
| `DidMethod` | Contracts `createDid`, `resolveDid`, `updateDid`, `deactivateDid` for a particular DID method implementation. |
| `DidMethodRegistry` | Context-scoped registry that decides which methods are available to the current `TrustWeaveConfig`. |
| `DidCreationOptions` | Typed builder for method-specific parameters (algorithm, domain, custom properties). |

Wallets expose DID helpers through the `DidManagement` capability (see the [Wallet API Reference](../api-reference/wallet-api.md#didmanagement)).

### Example: Registering and using DID methods

```kotlin
import com.trustweave.TrustWeave
import com.trustweave.did.*
import kotlinx.coroutines.runBlocking

fun main() = runBlocking {
    // Create TrustWeave instance with DID methods registered
    val trustweave = TrustWeave.create {
        didMethods {
            + DidKeyMethod(kms)  // Register did:key method
            // Additional methods can be registered here
        }
    }
    
    // Create a DID using typed options
    val issuerDid = trustweave.dids.create("key") {
        algorithm = KeyAlgorithm.ED25519
        // Additional properties can be set via additionalProperties
    }
    
    println("Issuer DID: ${issuerDid.id}")
}

**Outcome:** Registers DID methods during TrustWeave creation, creates a new DID using typed options, and returns the DID document for use in issuance flows.
```

### DID documents at a glance

A DID document generated by TrustWeave includes:

- `verificationMethod` entries referencing public keys (JWK or multibase).
- Usage relationships (`authentication`, `assertionMethod`, `keyAgreement`).
- Optional `service` endpoints and metadata fields (`created`, `updated`, `versionId`) for provenance tracking.

## Practical usage tips

- **Context-local registries** – create registries inside your `TrustWeaveConfig` to avoid global state and to simplify tests.
- **SPI discovery** – ship new methods by implementing `DidMethodProvider`; TrustWeave will auto-register them when the module is on the classpath.
- **Wallet DSL** – expose DID creation to end-users through `wallet { did { ... } }` (powered by `DidManagement`). See [Wallets](wallets.md#how-TrustWeave-handles-wallet-dids).
- **Verification** – ensure hosted DID documents or Universal Resolver endpoints are reachable from verifier environments to guarantee proof validation succeeds.
- **Error handling** – DID operations throw `TrustWeaveError` exceptions on failure. See [Error Handling](../advanced/error-handling.md).
- **Input validation** – TrustWeave automatically validates DID format and method registration before operations.
- **Service-based API** – Access DID operations through `trustweave.dids.create()`, `trustweave.dids.resolve()`, `trustweave.dids.update()`, and `trustweave.dids.deactivate()`.

## See also

- [Wallet API Reference – DidManagement](../api-reference/wallet-api.md#didmanagement)
- [Quick Start – Step 3](../getting-started/quick-start.md#step-3-create-a-did-with-typed-options)
- [DID Integration Guides](../integrations/README.md#did-method-integrations) – Implementation guides for all DID methods
- [Key Management](key-management.md)
- [Verifiable Credentials](verifiable-credentials.md)
- [Architecture Overview](../introduction/architecture-overview.md)

