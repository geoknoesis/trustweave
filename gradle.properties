# Gradle JVM memory settings
# Increase memory allocation to prevent OutOfMemoryError during compilation

# Maximum heap size for Gradle daemon (2GB)
org.gradle.jvmargs=-Xmx2048m -Xms512m -XX:MaxMetaspaceSize=512m -XX:+HeapDumpOnOutOfMemoryError

# Enable parallel execution and build cache
org.gradle.parallel=true
org.gradle.caching=true

# Enable configuration cache for faster builds
# Temporarily disabled to test if it interferes with kotlin.build.archivesTaskOutputAsFriendModule
# Re-enable after confirming the circular dependency is fixed
org.gradle.configuration-cache=false

# Kotlin compiler JVM arguments (increased for large codebases)
kotlin.daemon.jvmargs=-Xmx2048m -Xms512m -XX:MaxMetaspaceSize=512m

# Prevent JVM from hanging on OutOfMemoryError
kotlin.incremental=true

# Disable Kotlin's archivesTaskOutputAsFriendModule to prevent circular dependencies
# This prevents compileKotlin from depending on jar task, which causes circular dependencies
# between compileKotlin -> jar -> classes -> compileJava -> compileKotlin
kotlin.build.archivesTaskOutputAsFriendModule=false

